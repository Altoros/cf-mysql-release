# NOTE: This iaas is not currently tested by the cf-mysql team

properties:
  template_only:
    openstack:
      security_groups1: ["bosh"] # e.g. ["cf"]
      security_groups2: ["bosh"]
      security_groups3: ["bosh"]
      subnet_ids:
        mysql1: c5162269-60a1-46ba-9612-614c0ec85ae1
        mysql2: c5162269-60a1-46ba-9612-614c0ec85ae1
        mysql3: c5162269-60a1-46ba-9612-614c0ec85ae1

iaas_settings:
  <<: (( merge || nil ))

# NOTE:
# Replace 10.0.{0,1,2} part of the octet
# with your network configuration
  subnet_configs:
  - name: mysql1
    type: manual
    subnets:
    - range: 192.168.111.0/24
      reserved:
        - 192.168.111.2 - 192.168.111.210 
        - 192.168.111.220 - 192.168.111.255
      static:
        - 192.168.111.211 - 192.168.111.214
      gateway: 192.168.111.1
      dns:
        - 8.8.8.8 
      cloud_properties:
        net_id: (( properties.template_only.openstack.subnet_ids.mysql1 ))
        security_groups: (( properties.template_only.openstack.security_groups1 ))
  - name: mysql2
    type: manual
    subnets:
    - range: 192.168.111.0/24
      reserved:
        - 192.168.111.2 - 192.168.111.220 
        - 192.168.111.225 - 192.168.111.255
      static:
        - 192.168.111.221 - 192.168.111.224
      gateway: 192.168.111.1
      dns:
        - 8.8.8.8 
      cloud_properties:
        net_id: (( properties.template_only.openstack.subnet_ids.mysql2 ))
        security_groups: (( properties.template_only.openstack.security_groups2 ))
  - name: mysql3
    type: manual
    subnets:
    - range: 192.168.111.0/24
      reserved:
        - 192.168.111.2 - 192.168.111.234 
        - 192.168.111.240 - 192.168.111.255
      static:
        - 192.168.111.235 - 192.168.111.239
      gateway: 192.168.111.1
      dns:
        - 8.8.8.8 
      cloud_properties:
        net_id: (( properties.template_only.openstack.subnet_ids.mysql3 ))
        security_groups: (( properties.template_only.openstack.security_groups3 ))

  stemcell: &stemcell
    name: bosh-openstack-kvm-ubuntu-trusty-go_agent
    version: latest
  compilation_cloud_properties:
    instance_type: m1.large
  resource_pool_cloud_properties:
  - name: mysql_z1
    cloud_properties:
      instance_type: m1.large

  - name: mysql_z2
    cloud_properties:
      instance_type: m1.large

  - name: mysql_z3
    cloud_properties:
      instance_type: m1.large

  - name: arbitrator_z3
    cloud_properties:
      instance_type: m1.small

  - name: proxy_z1
    cloud_properties:
      instance_type: m1.medium

  - name: proxy_z2
    cloud_properties:
      instance_type: m1.medium

  - name: cf-mysql-broker_z1
    cloud_properties:
      instance_type: m1.medium

  - name: cf-mysql-broker_z2
    cloud_properties:
      instance_type: m1.medium

  - name: errands_z1
    cloud_properties:
      instance_type: m1.medium

  disk_pools:
  - name: mysql-persistent-disk
    disk_size: 100000
